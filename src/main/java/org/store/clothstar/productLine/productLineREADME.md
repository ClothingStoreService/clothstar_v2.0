# productLine 패키지 README

## 패키지 개요

이 패키지는 상품에 대한 기능을 구현하기 위한 패키지이다.

### 상품 생성 및 등록 설계안

1. 판매자 Role 유효성 검사
    - 판매자의 Role로 로그인된 상태에서만 상품 생성 가능
2. 상품 정보 입력
    - 상품명
    - 카테고리
    - 가격
    - 상품 대표 이미지
    - 상품 이미지 List
    - 상품 상태 : [준비중 → 판매중 / 할인중 → 품절 → 숨김 → 단종 → 삭제]
        1. 준비중 - `Coming Soon`  :  곧 판매될 예정이지만, 아직 판매가 시작되지 않은 상태입니다.
        2. 판매중 - `ForSale`    : 고객이 구매할 수 있는 상태
        3. 할인중 - `OnSale`  : 판매중의 하위 상태
        4. 품절 - `SoldOut`  :  재고가 없어서 현재 구매할 수 없는 상태
        5. 숨김 - `Hidden`  : 고객에게 검색이나 카테고리 등에 노출되지 않도록 숨겨진 상태
        6. 단종 - `Discontinued`  : 재고가 없으며, 더 이상 판매되지 않는 상태
        7. 삭제 - `deleted` : 판매자가 해당 상품을 삭제한 상태
    - 재고
    - 등록일시
    - 수정일시
3. 상품 판매
    - 상품 상태가 `판매중`인 경우만 판매 가능한 상태

### (판매자) 등록 상품 리스트 조회 설계안

1. 판매자 Role 유효성 검사
    - 판매자의 Role로 로그인된 상태에서만 판매중인 상품 리스트 조회 가능

2. 등록 상품 리스트 확인
    - 등록 한 상품들에 대한 리스트 조회
    - 정렬 옵션 : [최신등록순/판매량순/상품 상태별]

### (판매자) 등록 상품 상세 조회 / 수정 / 삭제  설계안

1. 등록 상품 상세 조회
    - 해당 상품 식별자 ID로 상품 상세 조회
    - 상품 상태가 4. 품절까지인 상품들에 대해 조회 가능
2. 등록 상품 수정
    - 해당 상품 식별자 ID로 상품 수정
3. 등록 상품 삭제
    - 재고가 0이 아닐 경우 경고 알림
    - 등록 상품 삭제 시 `isDeleted` 필드값을  `true` 로 변경, 더이상 리스트에서 조회 불가능

### (사용자) 상품 리스트 조회

1. 카테고리별 조회

- 1차 카테고리 : 남자, 여자, 랭킹 상품, 신상품
- 2차 카테고리 :  아우터, 상의, 하의, 이너, 신발, 가방

2. 조건 검색

- 상품명이나 브랜드를 입력하여 검색가능
- 품절상품 보기 옵션 선택가능
- 정렬 옵션 가능
  [정렬 옵션]
    - default: 신상품 순
    - 신상품순/낮은 가격/높은 가격/후기 많은 순/판매순/추천순

3. 하나의 상품에 상품 이미지, 이름, 브랜드, 가격, 할인율, 멤버십 가격, 별점, 후기 개수 출력

4. 페이징 출력

### API 디자인

- (판매자) 상품 등록: **POST** `/v1/productLines`
    - 프로세스
        1. 상품 정보 입력
            - 필수 입력 : 상품명, 대표 이미지, 가격, 재고, 상품 상세 설명, 카테고리
            - 추가 입력 : 상세 이미지
        2. 재고
            - 재고가 0일 경우 상품 상태 `품절`로 변경 (PATCH), 판매자에게 재고 0 알림 전송
            - 주문 취소, 환불 상품에 대해 재고 추가로 들어오는 경우 재고 수량 변경 (PATCH)

- (판매자) 등록 상품 리스트 조회: **GET** `/v1/productLines/?page={번호}&size={페이지당 상품 개수}`
    - 프로세스
        1. 판매자 Role 유효성 검사
            - 판매자의 Role로 로그인된 상태에서만 판매중인 상품 리스트 조회
        2. 등록 리스트 정렬 옵션
            - 정렬 옵션 : [최신등록순/판매량순/상품 상태별]

- (판매자) 상품 상세 조회: **GET** `/v1/productLines/{productId}`
    - 프로세스
        1. 주문 조회
            - 주문 상세 내역: 주문일자, 주문번호, 배송 진행 상태(+ 택배사 이름, 운송장 번호 - 판매자가 배송 보내면 입력됨), 주문 상품 정보(상품 이름, 브랜드 이름, 가격, 수량)
            - 구매자 정보: 구매자 이름, 이메일 주소, 연락처
        2. 구매 확정시(구매자가 구매 확정을 하는 경우)
            - 주문상태가 구매 확정이 됨(PATCH)
            - 주문상태: [ 주문 승인 -> 배송 완료 -> 구매 확정 ]
            - 상태의 변경 과정을 validation 한다(주문 승인에서 바로 구매 확정으로 넘어가지 않도록)
- (판매자)상품 수정 : **PUT** `/v1/productLines/{productId}`
    1. 상품 수정 조건

    - 판매자 본인이 등록한상품에 대해서 수정 가능

    2. 상품 수정

    - 상품명, 설명, 가격, 사진 등 상품 정보 수정

- (판매자)상품 취소 : **PATCH** `/v1/productLines/{productId}`
    - 프로세스
        1. 삭제 조건
            - 판매자 본인이 등록한상품에 대해서 삭제 가능
            - 상품이 판매중이 아닐 경우에만 삭제 가능 (판매중인 상품은 판매 중단 처리 필요)
        2. 상품 삭제
            - 판매중이 아닌 상태로 변경
            - 상품 삭제

- (구매자) 상품 리스트, 상세 조회 :
  상품 리스트 조회: **GET** /v1/productLines/?page={번호}&size={페이지당 상품 개수}&searchType={검색유형}&searchValue={검색값}
  상품 상세 조회 : **GET** /v1/productLines/{productId}
  카테고리별 조회: **GET** /v1/productLines/{category}?page={번호}&size={페이지당 게시글 개수}
    - 프로세스
        1. 
